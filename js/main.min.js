"use strict";Image.prototype.load=function(e){var o=this,a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(e){var a=new Blob([this.response]);o.src=window.URL.createObjectURL(a)},a.onprogress=function(e){o.completedPercentage=parseInt(e.loaded/e.total*100)},a.onloadstart=function(){o.completedPercentage=0},a.send()},Image.prototype.completedPercentage=0,setTimeout(function(){console.log("You've been on this page for 1 min now!"),ga("send","event","page","stay-for-1-min")},6e4);var gaOpenImageCount=0;function increaseOpenImagesCount(){10==++gaOpenImageCount&&(console.log("Opened 10 images!"),ga("send","event","image","open"))}function scrollTo(e){$("html, body").animate({scrollTop:$(e).offset().top+"px"},500)}$(function(){$('a[href^="#"]').click(function(e){e.preventDefault(),scrollTo($(this).attr("href"))}),$(".js-learn-more").click(function(e){console.log("Clicked"),ga("send","event","button","click")});var s=$(document.body),l=$(".modal"),o=$(".popup--gallery"),t=$(".popup--zoom"),e=$(".nav-list");$(".nav a").click(function(){e.removeClass("active"),s.removeClass("scroll-disabled"),$(".burger").removeClass("burger--active")}),$(".js-burger").click(function(){$(this).toggleClass("burger--active"),s.toggleClass("scroll-disabled"),e.toggleClass("active")});var i=$(".js-zoom-img"),r=0,a=$(".easter"),n=1,c=0,d=0;function p(){var e=5;768<window.innerWidth&&(e=10),5*(n-1)*5<(d=d<-5*(n-1)*5?-5*(n-1)*5:d)&&(d=5*(n-1)*5),5*(n-1)*e<(c=c<-5*(n-1)*e?-5*(n-1)*e:c)&&(c=5*(n-1)*e),3<n&&3==r?a.addClass("visible"):a.removeClass("visible"),i.css({transform:"translate("+c+"rem,"+d+"rem) scale("+n+")"}),a.css({transform:"translate("+c+"rem,"+d+"rem) scale("+n+")"})}function u(){$(".js-open-popup").click(function(){increaseOpenImagesCount(),s.addClass("scroll-disabled"),l.addClass("visible"),t.css("display","block"),r=+$(this).attr("data-index");var e=new Image,a=$(this).siblings("img").attr("src").replace(/\.(png|jpg|jpeg)/,"-full.$1"),o=(e.load(a),$(".js-progress")),n=setInterval(function(){o.attr("value",e.completedPercentage),100<=e.completedPercentage&&($(".loading-overlay").addClass("hidden"),i.replaceWith($(e).addClass("popup-img js-zoom-img")),i=$(".js-zoom-img"),clearInterval(n))},500)}),$(".js-close-popup").click(function(){s.removeClass("scroll-disabled"),l.removeClass("visible"),o.css("display","none"),t.css("display","none")}),$(".js-next").click(function(){increaseOpenImagesCount(),++m>g.length-1&&(m=0),f()}),$(".js-prev").click(function(){increaseOpenImagesCount(),--m<0&&(m=g.length-1),f()}),$(".js-open-gallery").click(function(){var e=$(this).parents(".gallery-slider-item").attr("data-room"),a=$(this).parent().index();10<=+e?$(".popup-header__text2").css("display","block"):$(".popup-header__text2").css("display","none"),g=[],$(this).parents(".gallery-body").children().each(function(e,a){g.push($(a).find("img").attr("src").replace(/\.(png|jpg|jpeg)/,"-full.$1"))}),m=a,s.addClass("scroll-disabled"),l.addClass("visible"),o.css("display","block"),f()})}$(".popup-zoomin").click(function(){7<(n+=1)&&(n=7),p()}),$(".popup-zoomout").click(function(){--n<1&&(n=1),p()}),$(".popup-up").click(function(){d-=5,p()}),$(".popup-down").click(function(){d+=5,p()}),$(".popup-left").click(function(){c-=5,p()}),$(".popup-right").click(function(){c+=5,p()}),u();var g=[],m=0,v=$(".js-current-img");function f(){v.attr("src",g[m])}$(".gallery-slider").addClass("enabled").addClass("owl-carousel").owlCarousel({items:1,margin:1,loop:!0,mouseDrag:!1,dots:!0,nav:!0,navText:["<img src='img/icons/angle.svg' aria-label='Вперед'>","<img src='img/icons/angle.svg' aria-label='Назад'>"]}).on("changed.owl.carousel",function(e){u()}),$(".work-slider").addClass("enabled").addClass("owl-carousel").owlCarousel({items:1,margin:1,loop:!0,mouseDrag:!1,dots:!0,nav:!0,navText:["<img src='img/icons/angle-white.svg' aria-label='Вперед'>","<img src='img/icons/angle-white.svg' aria-label='Назад'>"],responsive:{0:{margin:150},768:{margin:1}}}).on("changed.owl.carousel",function(e){u()}),$(".video").each(function(e,a){var o=$(a),n=o.find(".video__link"),s=(o.find(".video__media"),o.find(".video__button")),l=n.attr("href").match(/https:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9]+)/)[1];o.on("click",function(){var e;null==o.attr("data-initialized")&&(o.attr("data-initialized",""),n.remove(),s.remove(),e=$("<iframe>").addClass("video__media").attr("allowfullscreen","").attr("allow","autoplay").attr("src","https://www.youtube.com/embed/"+l+"?rel=0&autoplay=1&showinfo=0"),o.append(e))}),n.removeAttr("href"),o.addClass("video--enabled")}),$(".js-parallax-bg").each(function(e,a){function o(){var e=0;768<window.innerWidth&&(e=-$(window).scrollTop()/100),n.css({backgroundPosition:"center "+(-33+e)+"rem"})}var n=$(a);o(),$(window).scroll(o)})});